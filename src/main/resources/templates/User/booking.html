<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<form th:object="${reservation}" method="POST" action="/user/bookReservation">
    <input type="hidden" th:field="*{id}" />
    <input type="text"  id="name" name="name" th:field="*{name}" class="form-control">
    <input type="number"  id="numberOfPeople" name="numberOfPeople" th:field="*{numberOfPeople}" class="form-control">

    <input type="text"  id="detail" name="detail" th:field="*{detail}" class="form-control">
    <input type="text"  id="description" name="description" th:field="*{description}" class="form-control">

</form>
<table class="items">
    <thead>
    <tr>
        <th>Product</th>
        <th>Product Category</th>
        <th>Quantity</th>
        <th>Price</th>
        <th>Total</th>
        <th> </th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="item : ${allReservationItem}">
        <td>
            <div class="product-info">
                <div class="product-image">
                    <img class="img-fluid mx-auto d-block" th:if="${item.image != null}" th:src="@{'/display?id=' + ${item.productId}}" alt="">
                    <img class="img-fluid mx-auto d-block" th:unless="${item.image != null}" src="/Admin/img/foodDefault.png" alt="">
                </div>
                <div class="product-name">
                    <a th:text="${item.name}"> </a>
                </div>
            </div>
        </td>
        <td>
            <span class="product-category" th:text="${item.productCategory}">5 inch</span>
        </td>
        <td>
            <form action="#" th:action="@{/user/booking/updateBooking}" method="POST">
                <input type="hidden" th:name="productId" th:value="${item.productId}">
                <input type="hidden" th:name="id" th:value="${id}">
                <input class="form-control quantity-input" type="number" min="1" th:name="quantity" th:value="${item.quantity}" onblur="this.form.submit()" style="width:85px;">
            </form>
        </td>
        <td>
            <span th:text="${#numbers.formatInteger(item.price,3,'POINT')+' VND'}"></span>
        </td>
        <td>
            <span th:text="${#numbers.formatInteger(item.price * item.quantity,3,'POINT')+' VND'}"></span>
        </td>
        <td>
            <a th:href="@{/user/booking/remove/{id}(id=${item.productId})}" class="btn btn-danger">Remove</a>
        </td>
    </tr>
    </tbody>
</table>
<span class="price" th:text="${#numbers.formatInteger(totalAmount,3,'POINT')+' VND'}"></span>
<div class="checkout-container">
    <div class="address-section">
        <h2>Address Information</h2>
        <div th:if="${DuplicateDate}" class="alert alert-danger">
            <p style="text-align:center;" th:text="${DuplicateDate}"></p>
        </div>
        <div th:if="${failMessage}" class="alert alert-danger">
            <p style="text-align:center;" th:text="${failMessage}"></p>
        </div>
                <form  th:action="@{/user/placeBooking}" method="post" th:object="${booking}"     >
                 <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="namee" name="name" required>
                </div>

                <div class="form-group">
                    <label for="phone">Phone:</label>
                    <input type="text" id="phone" name="phone" required>
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
                    <div class="form-group" th:classappend="${#fields.hasErrors('dateTime')} ? 'has-error'">
                        <label for="dateTime">Datetime:</label>
                        <input type="datetime-local" id="dateTime" name="dateTime" th:field="*{dateTime}" />



                    </div>
                <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
                <button type="submit">Place order</button>
            </form>
    </div>

</div>
</body>
</html>